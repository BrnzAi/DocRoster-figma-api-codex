<section class="auth auth--register">
  <div class="auth__frame">
    <div class="auth__card">
      <div class="auth__card-header">
        <div class="auth__avatar-shell">
          <img [src]="avatarSrc()" alt="Profile preview" class="auth__avatar" />
          <button type="button" class="auth__avatar-action" aria-label="Upload photo" (click)="triggerAvatarUpload()" [disabled]="avatarUploading()">
            <img src="assets/figma/register/1848_1719.png" alt="" />
          </button>
          <input #avatarInput type="file" accept="image/*" class="auth__avatar-input" (change)="onAvatarSelected($event)" />
        </div>
        <button type="button" class="auth__close" aria-label="Back to sign in" (click)="goToLogin()"></button>
      </div>

      <div class="auth__intro">
        <h1 class="auth__title">Register account</h1>
        <p class="auth__subtitle">Sign up to view and manage specialists</p>
      </div>

      <img src="assets/images/logos/logo-docroster.png" alt="DocRoster brand illustration" class="auth__card-logo" />

      <div class="auth__providers">
        <button type="button" class="auth__provider" aria-label="Sign up with Google">
          <img src="assets/figma/login/google.png" alt="" class="auth__provider-icon" />
          <span>Sign up</span>
        </button>

        <button type="button" class="auth__provider" aria-label="Sign up with Apple">
          <img src="assets/figma/login/apple.png" alt="" class="auth__provider-icon" />
          <span>Sign up</span>
        </button>
      </div>

      <div class="auth__divider" aria-hidden="true">
        <span class="auth__divider-line"></span>
        <span class="auth__divider-label">OR</span>
        <span class="auth__divider-line"></span>
      </div>

      <form [formGroup]="form" (ngSubmit)="submit()" class="auth__form" novalidate>
        <p class="auth__form-error" *ngIf="showValidationErrors()">Please fill in the required details.</p>

        <label class="auth__field" [class.auth__field--invalid]="isInvalid('fullName')">
          <input
            type="text"
            formControlName="fullName"
            placeholder="Person or company name"
            autocomplete="name"
            [attr.aria-invalid]="isInvalid('fullName')"
          />
        </label>

        <label class="auth__field" [class.auth__field--invalid]="isInvalid('email')">
          <input
            type="email"
            formControlName="email"
            placeholder="Email used for login"
            autocomplete="email"
            [attr.aria-invalid]="isInvalid('email')"
          />
        </label>

        <label class="auth__field">
          <input type="tel" formControlName="phone" placeholder="Phone number (optional)" autocomplete="tel" />
        </label>

        <label class="auth__terms">
          <input type="checkbox" formControlName="agreeToTerms" />
          <span class="auth__terms-box">
            <img src="assets/figma/register/1848_1714.png" alt="" />
          </span>
          <span class="auth__terms-label">
            I’ve read and agree to the
            <a href="#" (click)="$event.preventDefault()">Terms &amp; Conditions</a>
          </span>
        </label>

        <button class="auth__submit" type="submit" [disabled]="status() === 'pending'">
          <span>{{ status() === 'pending' ? 'Creating account…' : 'Sign up to DocRoster' }}</span>
        </button>

        <p class="auth__form-status auth__form-status--error" *ngIf="status() === 'error'">{{ errorMessage() }}</p>
        <p class="auth__form-status auth__form-status--success" *ngIf="status() === 'success'">
          Account created! Check your inbox for verification.
        </p>
      </form>
    </div>
  </div>
</section>
