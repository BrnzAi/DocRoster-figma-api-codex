@use 'styles/variables' as *;

$figma-primary: #0a1748;

:host {
  display: block;
  pointer-events: none;
}

:host.has-filters-open {
  pointer-events: auto;
}

.search-screen {
  display: flex;
  justify-content: flex-start;
  padding: 24px;
  pointer-events: auto;
}

.search-screen__layer {
  position: relative;
  width: 100%;
  max-width: 393px;
  border-radius: 40px;
  background: rgba(255, 255, 255, 0.24);
  border: 1px solid rgba(255, 255, 255, 0.28);
  box-shadow: 0 0 48px rgba($figma-primary, 0.24);
  backdrop-filter: blur(32px);
  display: flex;
  flex-direction: column;
  gap: 24px;
  padding: 24px;
  margin: 0;
}

.search-screen__toolbar {
  display: flex;
  align-items: flex-end;
  gap: 12px;
}

.search-bar {
  flex: 1 1 auto;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  height: 48px;
  padding: 4px 24px 4px 20px;
  border-radius: 999px;
  border: 0.5px solid rgba($figma-primary, 0.08);
  background: transparent;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.4),
    inset 1px 0 0 rgba(255, 255, 255, 0.32),
    inset 0 -1px 4px rgba(0, 0, 0, 0.2),
    inset -1px 0 4px rgba(0, 0, 0, 0.16);
  backdrop-filter: blur(6px);
}

.search-bar__icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;

  svg {
    display: block;
  }
}

.search-bar__input {
  flex: 1 1 auto;
  border: 0;
  outline: 0;
  background: transparent;
  font-size: 13.5px;
  font-weight: 500;
  letter-spacing: -0.31px;
  line-height: 21.6px;
  color: $figma-primary;
  opacity: 0.4;
  transition: opacity 0.2s ease;

  &::placeholder {
    color: $figma-primary;
    opacity: 0.4;
  }

  &:focus {
    opacity: 1;
  }
}

.search-bar__trigger {
  width: 32px;
  height: 32px;
  border-radius: 16px;
  border: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: rgba($figma-primary, 0.08);
  cursor: pointer;
  transition: transform 0.2s ease, background 0.2s ease;

  svg {
    display: block;
  }

  &:hover {
    transform: translateY(-1px);
    background: rgba(255, 61, 150, 0.16);
  }

  &.is-active {
    background: rgba(255, 61, 150, 0.24);
  }
}

.search-profile {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  width: 68px;
  min-height: 48px;
  padding: 8px 12px;
  border-radius: 999px;
  border: 0.5px solid rgba($figma-primary, 0.1);
  background: rgba(255, 255, 255, 0.95);
  text-decoration: none;
  color: $figma-primary;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.4),
    inset 1px 0 0 rgba(255, 255, 255, 0.32),
    inset 0 -1px 3px rgba(0, 0, 0, 0.2),
    inset -1px 0 3px rgba(0, 0, 0, 0.16);
  backdrop-filter: blur(4.5px);
}

.search-profile__icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;

  svg {
    display: block;
  }
}

.search-profile__label {
  font-family: 'SF UI Display', 'SF Pro Display', system-ui, sans-serif;
  font-size: 9px;
  font-weight: 500;
  line-height: 9px;
  letter-spacing: -0.306px;
  text-transform: none;
  color: $figma-primary;
}

.search-headline {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin: 0;
}

.search-headline__label {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  letter-spacing: -0.41px;
  color: $figma-primary;
}

.search-headline__query {
  margin: 0;
  font-size: 32px;
  font-weight: 700;
  letter-spacing: 0.37px;
  line-height: 38.4px;
  color: $figma-primary;
}

.search-headline__count {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  letter-spacing: -0.24px;
  color: rgba($figma-primary, 0.65);
}

.search-stack {
  display: flex;
  flex-direction: column;
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(255, 255, 255, 0.16);
  overflow: hidden;
  margin: 0 -24px;
}

.search-stack--empty {
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

.search-stack__empty {
  margin: 0;
  padding: 32px 24px;
  font-size: 15px;
  font-weight: 600;
  color: rgba($figma-primary, 0.7);
}

.search-row {
  border-bottom: 1px solid rgba($figma-primary, 0.1);

  &:last-child {
    border-bottom: none;
  }

  &.is-active {
    background: rgba(255, 255, 255, 0.35);
  }
}

.search-row__body {
  width: 100%;
  display: grid;
  grid-template-columns: 56px 1fr auto;
  align-items: center;
  gap: 16px;
  padding: 18px 24px;
  background: transparent;
  border: none;
  text-align: left;
  cursor: pointer;
  color: inherit;
  transition: transform 0.2s ease;

  &:hover {
    transform: translateX(4px);
  }
}

.search-row__avatar {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.25);
}

.search-row__details {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.search-row__name {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  letter-spacing: -0.5px;
  color: $figma-primary;
}

.search-row__meta,
.search-row__clinic,
.search-row__address {
  margin: 0;
  font-size: 14px;
  font-weight: 400;
  letter-spacing: -0.41px;
  color: rgba($figma-primary, 0.6);
}

.search-row__chevron {
  width: 18px;
  height: 18px;
  background: $figma-primary;
  opacity: 0.55;
  mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%230A1748" d="M9.29 6.71L13.58 11l-4.29 4.29 1.42 1.42L16.41 11l-5.7-5.71z"/></svg>') center/contain;
  -webkit-mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%230A1748" d="M9.29 6.71L13.58 11l-4.29 4.29 1.42 1.42L16.41 11l-5.7-5.71z"/></svg>') center/contain;
}

.search-filters {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  padding: clamp(24px, 6vw, 48px);
  z-index: 4;
  pointer-events: auto;
}

.search-filters__backdrop {
  position: absolute;
  inset: 0;
  background: rgba($figma-primary, 0.45);
  backdrop-filter: blur(20px);
  pointer-events: auto;
}

.search-filters__card {
  position: relative;
  width: min(100%, 360px);
  border-radius: 32px;
  border: 1px solid rgba(255, 255, 255, 0.24);
  background: rgba(255, 255, 255, 0.28);
  box-shadow: 0 40px 80px rgba(0, 0, 0, 0.25);
  backdrop-filter: blur(24px);
  padding: 28px;
  display: flex;
  flex-direction: column;
  gap: 20px;
  z-index: 5;
  max-height: min(90vh, 640px);
  pointer-events: auto;
}

.search-filters__label {
  margin: 0;
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.24em;
  text-transform: uppercase;
  color: rgba($figma-primary, 0.5);
}

.search-filters__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;

  h2 {
    margin: 0;
    font-size: 24px;
    font-weight: 700;
    color: $figma-primary;
  }
}

.search-filters__actions {
  display: inline-flex;
  align-items: center;
  gap: 12px;
}

.search-filters__actions-pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(255, 61, 150, 0.16);
  backdrop-filter: blur(12px);
}

.search-filters__action {
  width: 36px;
  height: 36px;
  border-radius: 18px;
  border: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  background: rgba(255, 255, 255, 0.95);
  transition: transform 0.2s ease;

  &:hover {
    transform: translateY(-1px);
  }
}

.search-filters__action--apply::before,
.search-filters__action--reset::before,
.search-filters__action--close::before {
  content: '';
  width: 18px;
  height: 18px;
  display: block;
  background: $figma-primary;
}

.search-filters__action--apply::before {
  width: 15px;
  height: 12px;
  mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 12"><path fill="%230A1748" d="M4.65833 8.81667L1.18333 5.34167L0 6.51667L4.65833 11.175L14.6583 1.175L13.4833 0L4.65833 8.81667Z"/></svg>') center/contain;
  -webkit-mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 12"><path fill="%230A1748" d="M4.65833 8.81667L1.18333 5.34167L0 6.51667L4.65833 11.175L14.6583 1.175L13.4833 0L4.65833 8.81667Z"/></svg>') center/contain;
}

.search-filters__action--reset::before {
  width: 20px;
  height: 20px;
  mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="%230A1748" d="M11.6667 10C11.6667 9.08333 10.9167 8.33333 10 8.33333C9.08333 8.33333 8.33333 9.08333 8.33333 10C8.33333 10.9167 9.08333 11.6667 10 11.6667C10.9167 11.6667 11.6667 10.9167 11.6667 10ZM10 2.5C8.01088 2.5 6.10322 3.29018 4.6967 4.6967C3.29018 6.10322 2.5 8.01088 2.5 10H0L3.33333 13.3333L6.66667 10H4.16667C4.16667 6.775 6.775 4.16667 10 4.16667C13.225 4.16667 15.8333 6.775 15.8333 10C15.8345 11.0715 15.5402 12.1226 14.983 13.0377C14.4257 13.9529 13.627 14.6968 12.6746 15.1877C11.7221 15.6785 10.6528 15.8974 9.58411 15.8202C8.5154 15.743 7.48866 15.3727 6.61667 14.75L5.43333 15.95C6.37887 16.6756 7.48372 17.1654 8.65631 17.3788C9.8289 17.5922 11.0355 17.5231 12.176 17.1772C13.3166 16.8312 14.3582 16.2185 15.2147 15.3897C16.0712 14.5609 16.7179 13.5398 17.1011 12.4113C17.4842 11.2827 17.5929 10.079 17.4181 8.90008C17.2434 7.72112 16.7901 6.60078 16.096 5.63193C15.4018 4.66308 14.4868 3.87361 13.4266 3.32895C12.3665 2.78429 11.1919 2.50012 10 2.5Z"/></svg>') center/contain;
  -webkit-mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="%230A1748" d="M11.6667 10C11.6667 9.08333 10.9167 8.33333 10 8.33333C9.08333 8.33333 8.33333 9.08333 8.33333 10C8.33333 10.9167 9.08333 11.6667 10 11.6667C10.9167 11.6667 11.6667 10.9167 11.6667 10ZM10 2.5C8.01088 2.5 6.10322 3.29018 4.6967 4.6967C3.29018 6.10322 2.5 8.01088 2.5 10H0L3.33333 13.3333L6.66667 10H4.16667C4.16667 6.775 6.775 4.16667 10 4.16667C13.225 4.16667 15.8333 6.775 15.8333 10C15.8345 11.0715 15.5402 12.1226 14.983 13.0377C14.4257 13.9529 13.627 14.6968 12.6746 15.1877C11.7221 15.6785 10.6528 15.8974 9.58411 15.8202C8.5154 15.743 7.48866 15.3727 6.61667 14.75L5.43333 15.95C6.37887 16.6756 7.48372 17.1654 8.65631 17.3788C9.8289 17.5922 11.0355 17.5231 12.176 17.1772C13.3166 16.8312 14.3582 16.2185 15.2147 15.3897C16.0712 14.5609 16.7179 13.5398 17.1011 12.4113C17.4842 11.2827 17.5929 10.079 17.4181 8.90008C17.2434 7.72112 16.7901 6.60078 16.096 5.63193C15.4018 4.66308 14.4868 3.87361 13.4266 3.32895C12.3665 2.78429 11.1919 2.50012 10 2.5Z"/></svg>') center/contain;
}

.search-filters__action--close::before {
  mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%230A1748" d="M18.3 5.71 12 12l6.3 6.29-1.41 1.41L10.59 13.4 4.3 19.71 2.89 18.3 9.18 12 2.89 5.71 4.3 4.3l6.29 6.29 6.3-6.29z"/></svg>') center/contain;
  -webkit-mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%230A1748" d="M18.3 5.71 12 12l6.3 6.29-1.41 1.41L10.59 13.4 4.3 19.71 2.89 18.3 9.18 12 2.89 5.71 4.3 4.3l6.29 6.29 6.3-6.29z"/></svg>') center/contain;
}

.search-filters__body {
  display: flex;
  flex-direction: column;
  gap: 20px;
  flex: 1 1 auto;
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: 8px;
}

.search-filters__group + .search-filters__group {
  margin: 0 -28px;
  padding: 20px 28px 0;
  border-top: 1px solid rgba($figma-primary, 0.1);
}

.search-filters__options {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.search-filters__option {
  min-width: 96px;
  padding: 10px 18px;
  border-radius: 999px;
  border: 1px solid rgba($figma-primary, 0.1);
  background: rgba(255, 255, 255, 0.92);
  font-size: 0.95rem;
  font-weight: 600;
  letter-spacing: -0.24px;
  color: rgba($figma-primary, 0.75);
  cursor: pointer;
  transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;

  &:hover {
    background: rgba($figma-primary, 0.08);
  }

  &.is-active {
    color: $figma-primary;
    border-color: rgba($figma-primary, 0.24);
    background: rgba(255, 61, 150, 0.16);
  }
}

@media (max-width: 540px) {
  .search-screen {
    padding: 24px 16px 48px;
  }

  .search-screen__layer {
    padding-left: 20px;
    padding-right: 20px;
  }

  .search-screen__toolbar {
    flex-direction: column;
    align-items: stretch;
  }

  .search-profile {
    width: 100%;
    flex-direction: row;
    justify-content: flex-start;
    gap: 12px;
    font-size: 12px;
  }

  .search-stack {
    margin: 0 -20px;
  }
}
