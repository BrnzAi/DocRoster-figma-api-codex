{"version":3,"file":"566.js","mappings":"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","sources":["./src/app/feature/review/data-access/review.facade.ts","./src/app/feature/review/ui/review-page.component.ts","./src/app/feature/review/ui/review-page.component.html"],"sourcesContent":["import { Injectable, inject } from '@angular/core';\nimport { Observable, combineLatest } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\n\nimport { DocRosterApiService } from '../../../data-access/doc-roster-api.service';\nimport { Clinic } from '../../../shared/data-access/models/clinic.model';\nimport { Doctor } from '../../../shared/data-access/models/doctor.model';\nimport { Review } from '../../../shared/data-access/models/review.model';\n\n@Injectable({ providedIn: 'root' })\nexport class ReviewFacade {\n  private readonly api = inject(DocRosterApiService);\n\n  getReview(reviewId: string): Observable<Review | undefined> {\n    return this.api.getReviewById(reviewId);\n  }\n\n  getDoctorForReview(reviewId: string): Observable<Doctor | undefined> {\n    return this.getReview(reviewId).pipe(\n      switchMap((review) => (review ? this.api.getDoctorById(review.doctorId) : this.api.getDoctors().pipe(map(() => undefined))))\n    );\n  }\n\n  getClinicForReview(reviewId: string): Observable<Clinic | undefined> {\n    return this.getDoctorForReview(reviewId).pipe(\n      switchMap((doctor) => (doctor ? this.api.getClinicById(doctor.clinicId) : this.api.getClinics().pipe(map(() => undefined))))\n    );\n  }\n\n  getReviewContext(reviewId: string): Observable<{ review?: Review; doctor?: Doctor; clinic?: Clinic }> {\n    return combineLatest([\n      this.getReview(reviewId),\n      this.getDoctorForReview(reviewId),\n      this.getClinicForReview(reviewId)\n    ]).pipe(map(([review, doctor, clinic]) => ({ review, doctor, clinic })));\n  }\n}\n","import { AsyncPipe, DatePipe, NgIf } from '@angular/common';\nimport { ChangeDetectionStrategy, Component, inject } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { map, switchMap } from 'rxjs/operators';\n\nimport { DoctorCardComponent } from '../../../shared/ui/doctor-card/doctor-card.component';\nimport { ReviewCardComponent } from '../../../shared/ui/review-card/review-card.component';\nimport { SectionHeaderComponent } from '../../../shared/ui/section-header/section-header.component';\nimport { ReviewFacade } from '../data-access/review.facade';\n\n@Component({\n  selector: 'dr-review-page',\n  standalone: true,\n  imports: [AsyncPipe, NgIf, DatePipe, SectionHeaderComponent, ReviewCardComponent, DoctorCardComponent],\n  templateUrl: './review-page.component.html',\n  styleUrls: ['./review-page.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ReviewPageComponent {\n  private readonly route = inject(ActivatedRoute);\n  private readonly facade = inject(ReviewFacade);\n\n  readonly context$ = this.route.paramMap.pipe(\n    map((params) => params.get('id') ?? ''),\n    switchMap((id) => this.facade.getReviewContext(id))\n  );\n}\n","<section class=\"review section\" *ngIf=\"context$ | async as context; else loading\">\n  <div class=\"container\" *ngIf=\"context.review as review; else notFound\">\n    <dr-section-header\n      [title]=\"review.headline\"\n      [subtitle]=\"review.comment\"\n      badge=\"Community review\"\n    ></dr-section-header>\n\n    <div class=\"review__meta\">\n      <span>Rated {{ review.rating }}/5</span>\n      <span>{{ review.author }} · {{ review.role }}</span>\n      <span>{{ review.createdAt | date: 'mediumDate' }}</span>\n    </div>\n\n    <div class=\"review__context\" *ngIf=\"context.doctor\">\n      <h3>Specialist referenced</h3>\n      <dr-doctor-card\n        [doctor]=\"context.doctor\"\n        [clinic]=\"context.clinic\"\n        [showActions]=\"false\"\n      ></dr-doctor-card>\n    </div>\n\n    <div class=\"review__card\">\n      <dr-review-card [review]=\"review\"></dr-review-card>\n    </div>\n  </div>\n</section>\n\n<ng-template #loading>\n  <div class=\"container section\"><p>Loading story…</p></div>\n</ng-template>\n\n<ng-template #notFound>\n  <div class=\"container section\"><p>Story not found. Explore other community stories from the map.</p></div>\n</ng-template>\n"],"names":["inject","combineLatest","map","switchMap","DocRosterApiService","ReviewFacade","constructor","api","getReview","reviewId","getReviewById","getDoctorForReview","pipe","review","getDoctorById","doctorId","getDoctors","undefined","getClinicForReview","doctor","getClinicById","clinicId","getClinics","getReviewContext","clinic","factory","ɵfac","providedIn","AsyncPipe","DatePipe","NgIf","ActivatedRoute","DoctorCardComponent","ReviewCardComponent","SectionHeaderComponent","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵproperty","context_r1","ɵɵtemplate","ReviewPageComponent_section_0_div_1_div_10_Template","review_r2","headline","comment","ɵɵtextInterpolate1","rating","ɵɵtextInterpolate2","author","role","ɵɵtextInterpolate","ɵɵpipeBind2","createdAt","ReviewPageComponent_section_0_div_1_Template","notFound_r3","ReviewPageComponent","route","facade","context$","paramMap","params","get","id","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ReviewPageComponent_Template","rf","ctx","ReviewPageComponent_section_0_Template","ReviewPageComponent_ng_template_2_Template","ɵɵtemplateRefExtractor","ReviewPageComponent_ng_template_4_Template","ɵɵpipeBind1","loading_r4","styles","changeDetection"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}