"use strict";(self.webpackChunkdoc_roster=self.webpackChunkdoc_roster||[]).push([[945],{1945:(N,d,l)=>{l.r(d),l.d(d,{FiltersPageComponent:()=>D});var c=l(177),t=l(4438),f=l(5831);const _=n=>({"filter-group__option--active":n});function m(n,s){if(1&n&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.group.description)}}function h(n,s){if(1&n&&(t.j41(0,"span",6),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.icon)}}function b(n,s){if(1&n){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){const i=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.onToggle(i.value))}),t.DNE(1,h,2,1,"span",5),t.EFF(2),t.k0s()}if(2&n){const e=s.$implicit,o=t.XpG();t.Y8G("ngClass",t.eq3(3,_,o.isActive(e.value))),t.R7$(),t.Y8G("ngIf",e.icon),t.R7$(),t.SpI(" ",e.label," ")}}let F=(()=>{class n{constructor(){this.selected=[],this.toggled=new t.bkB}onToggle(e){this.toggled.emit(e)}isActive(e){return this.selected.includes(e)}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["dr-filter-group"]],inputs:{group:"group",selected:"selected"},outputs:{toggled:"toggled"},standalone:!0,features:[t.aNF],decls:7,vars:3,consts:[[1,"filter-group"],[4,"ngIf"],[1,"filter-group__options"],["type","button","class","filter-group__option",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"filter-group__option",3,"click","ngClass"],["class","material-symbols-rounded",4,"ngIf"],[1,"material-symbols-rounded"]],template:function(o,i){1&o&&(t.j41(0,"section",0)(1,"header")(2,"h3"),t.EFF(3),t.k0s(),t.DNE(4,m,2,1,"p",1),t.k0s(),t.j41(5,"div",2),t.DNE(6,b,3,5,"button",3),t.k0s()()),2&o&&(t.R7$(3),t.JRh(i.group.title),t.R7$(),t.Y8G("ngIf",i.group.description),t.R7$(2),t.Y8G("ngForOf",i.group.options))},dependencies:[c.pM,c.YU,c.bT],styles:[".filter-group[_ngcontent-%COMP%]{display:grid;gap:.75rem}.filter-group[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem}.filter-group[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.4rem 0 0;color:#6d7ba1}.filter-group__options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.filter-group__option[_ngcontent-%COMP%]{gap:.5rem;padding:.5rem 1rem;border-radius:999px;border:1px solid rgba(213,220,240,.8);font-weight:500;color:#0a1748;transition:background .18s ease-in-out,color .18s ease-in-out,border-color .18s ease-in-out;display:inline-flex;align-items:center;gap:.4rem;border:1px solid rgba(213,220,240,.9);cursor:pointer;background:#fff}.filter-group__option--active[_ngcontent-%COMP%]{background:#3d7aff1f;color:#3d7aff;border-color:#3d7aff66}.filter-group__option--active[_ngcontent-%COMP%]{background:#3d7aff1f;border-color:#3d7aff66;color:#3d7aff}.filter-group__option[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:1rem}"],changeDetection:0})}}return n})();var v=l(9719);function C(n,s){if(1&n&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&n){const e=s.$implicit;t.R7$(),t.JRh(e)}}let y=(()=>{class n{constructor(){this.tags=[]}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["dr-tag-list"]],inputs:{tags:"tags"},standalone:!0,features:[t.aNF],decls:2,vars:1,consts:[[1,"tag-list"],[4,"ngFor","ngForOf"]],template:function(o,i){1&o&&(t.j41(0,"ul",0),t.DNE(1,C,2,1,"li",1),t.k0s()),2&o&&(t.R7$(),t.Y8G("ngForOf",i.tags))},dependencies:[c.pM],styles:[".tag-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;padding:0;margin:0;list-style:none}.tag-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:999px;background:#fff;border:1px solid rgba(213,220,240,.8);font-weight:500;color:#0a1748;transition:background .18s ease-in-out,color .18s ease-in-out,border-color .18s ease-in-out;font-size:.85rem}.tag-list[_ngcontent-%COMP%]   li--active[_ngcontent-%COMP%]{background:#3d7aff1f;color:#3d7aff;border-color:#3d7aff66}"],changeDetection:0})}}return n})();var P=l(5429),k=l(4572),O=l(6354),$=l(6458);const G={virtual:n=>n.doctor.virtualCare,multilingual:n=>n.doctor.languages.length>1,evening:n=>n.doctor.availability.some(s=>s.times.some(e=>parseInt(e.split(":")[0],10)>=17)),weekend:n=>n.doctor.availability.some(s=>["Saturday","Sunday"].includes(s.day)),transit:()=>!0,hybrid:()=>!0,inperson:()=>!0,hmo:n=>n.doctor.acceptedPlans.includes("hmo"),ppo:n=>n.doctor.acceptedPlans.includes("ppo"),direct:n=>n.doctor.acceptedPlans.includes("direct")};let M=(()=>{class n{constructor(){this.api=(0,t.WQX)($.n),this.selections=(0,t.vPA)({}),this.filters$=this.api.getFilters(),this.selectionsSignal=(0,t.EWP)(()=>this.selections()),this.selections$=(0,P.br)(this.selectionsSignal),this.activeFilterCount=(0,t.EWP)(()=>Object.values(this.selections()).reduce((e,o)=>e+o.length,0)),this.filteredResults$=(0,k.z)([this.api.getSearchResults(),this.selections$,this.filters$]).pipe((0,O.T)(([e,o,i])=>Object.keys(o).length?e.filter(r=>Object.entries(o).every(([a,g])=>!g.length||!i.find(p=>p.id===a)||g.every(p=>{const u=G[p];return!u||u(r)}))):e))}toggleOption(e,o){const i={...this.selections()},r=i[e.id]??[];if("single"===e.type)i[e.id]=r[0]===o?[]:[o];else{const a=r.includes(o)?r.filter(g=>g!==o):[...r,o];i[e.id]=a}this.selections.set(i)}clearGroup(e){if(!this.selections()[e])return;const o={...this.selections()};delete o[e],this.selections.set(o)}resetAll(){this.selections.set({})}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function R(n,s){if(1&n&&(t.j41(0,"div",9)(1,"span"),t.EFF(2,"Active filters"),t.k0s(),t.nrm(3,"dr-tag-list",10),t.k0s()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("tags",e.selectedTags())}}function x(n,s){if(1&n){const e=t.RV6();t.j41(0,"button",16),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.clearGroup(i.id))}),t.EFF(1),t.k0s()}if(2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" Clear ",e.title.toLowerCase()," ")}}function T(n,s){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"dr-filter-group",14),t.bIt("toggled",function(i){const r=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.onToggle(r,i))}),t.k0s(),t.DNE(3,x,2,1,"button",15),t.k0s(),t.bVm()}if(2&n){const e=s.$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("group",e)("selected",o.selectionForGroup(e.id)),t.R7$(),t.Y8G("ngIf",o.selectionForGroup(e.id).length)}}function j(n,s){if(1&n&&(t.j41(0,"div",11),t.DNE(1,T,4,3,"ng-container",12),t.k0s()),2&n){const e=s.ngIf;t.R7$(),t.Y8G("ngForOf",e)}}function E(n,s){if(1&n&&t.nrm(0,"dr-doctor-card",19),2&n){const e=s.$implicit;t.Y8G("doctor",e.doctor)("clinic",e.clinic)("nextAvailable",e.nextAvailable)("highlightDistance",e.distanceInMinutes)}}function I(n,s){if(1&n&&(t.j41(0,"div",17)(1,"h3"),t.EFF(2,"Preview results"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s(),t.DNE(5,E,1,4,"dr-doctor-card",18),t.k0s()),2&n){const e=s.ngIf;t.R7$(4),t.SpI("Showing ",e.length," matches across the pilot network."),t.R7$(),t.Y8G("ngForOf",e)}}let D=(()=>{class n{constructor(){this.facade=(0,t.WQX)(M),this.filters$=this.facade.filters$,this.selections=this.facade.selectionsSignal,this.filteredResults$=this.facade.filteredResults$,this.activeFilters=this.facade.activeFilterCount,this.hasActiveFilters=(0,t.EWP)(()=>this.activeFilters()>0),this.selectedTags=(0,t.EWP)(()=>Object.values(this.selections()).flatMap(e=>e??[]))}onToggle(e,o){this.facade.toggleOption(e,o)}clearGroup(e){this.facade.clearGroup(e)}resetAll(){this.facade.resetAll()}selectionForGroup(e){return this.selections()[e]??[]}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["dr-filters-page"]],standalone:!0,features:[t.aNF],decls:12,vars:7,consts:[[1,"filters-hero","section"],[1,"container"],["title","Design smart filters","subtitle","Combine access modes, availability and language support to build reusable filter presets for DocRoster.","badge","Configurator"],["actions","",1,"filters-hero__actions"],["type","button",1,"button",3,"click"],["class","filters-hero__selected",4,"ngIf"],[1,"filters-layout","container"],["class","filters-layout__groups",4,"ngIf"],["class","filters-layout__results",4,"ngIf"],[1,"filters-hero__selected"],[3,"tags"],[1,"filters-layout__groups"],[4,"ngFor","ngForOf"],[1,"filters-layout__group"],[3,"toggled","group","selected"],["class","filters-layout__clear","type","button",3,"click",4,"ngIf"],["type","button",1,"filters-layout__clear",3,"click"],[1,"filters-layout__results"],[3,"doctor","clinic","nextAvailable","highlightDistance",4,"ngFor","ngForOf"],[3,"doctor","clinic","nextAvailable","highlightDistance"]],template:function(o,i){1&o&&(t.j41(0,"section",0)(1,"div",1)(2,"dr-section-header",2)(3,"div",3)(4,"button",4),t.bIt("click",function(){return i.resetAll()}),t.EFF(5,"Clear all"),t.k0s()()(),t.DNE(6,R,4,1,"div",5),t.k0s()(),t.j41(7,"section",6),t.DNE(8,j,2,1,"div",7),t.nI1(9,"async"),t.DNE(10,I,6,2,"div",8),t.nI1(11,"async"),t.k0s()),2&o&&(t.R7$(6),t.Y8G("ngIf",i.hasActiveFilters()),t.R7$(2),t.Y8G("ngIf",t.bMT(9,3,i.filters$)),t.R7$(2),t.Y8G("ngIf",t.bMT(11,5,i.filteredResults$)))},dependencies:[c.Jj,c.pM,c.bT,v.U,F,y,f.t],styles:[".filters-hero[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3d7aff1a,#21b12814)}.filters-hero__actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.filters-hero__selected[_ngcontent-%COMP%]{margin-top:1.5rem;display:grid;gap:.5rem}.filters-hero__selected[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#0a1748}.filters-layout[_ngcontent-%COMP%]{display:grid;gap:2rem;grid-template-columns:repeat(auto-fit,minmax(320px,1fr))}.filters-layout__group[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 20px 40px #0f172a14;display:grid;gap:.75rem}.filters-layout__clear[_ngcontent-%COMP%]{justify-self:flex-start;background:none;border:none;color:#3d7aff;font-weight:600;cursor:pointer}.filters-layout__results[_ngcontent-%COMP%]{display:grid;gap:1.5rem}"],changeDetection:0})}}return n})()}}]);