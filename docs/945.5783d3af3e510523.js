"use strict";(self.webpackChunkdoc_roster=self.webpackChunkdoc_roster||[]).push([[945],{1945:(Y,_,l)=>{l.r(_),l.d(_,{FiltersPageComponent:()=>S});var g=l(2200),c=l(2615),d=l(9295),h=l(5831),t=l(3664);const b=e=>({"filter-group__option--active":e});function v(e,n){if(1&e&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&e){const s=t.XpG();t.R7$(),t.JRh(s.group.description)}}function F(e,n){if(1&e&&(t.j41(0,"span",6),t.EFF(1),t.k0s()),2&e){const s=t.XpG().$implicit;t.R7$(),t.JRh(s.icon)}}function C(e,n){if(1&e){const s=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){const i=c.eBV(s).$implicit,r=t.XpG();return c.Njj(r.onToggle(i.value))}),t.DNE(1,F,2,1,"span",5),t.EFF(2),t.k0s()}if(2&e){const s=n.$implicit,o=t.XpG();t.Y8G("ngClass",t.eq3(3,b,o.isActive(s.value))),t.R7$(),t.Y8G("ngIf",s.icon),t.R7$(),t.SpI(" ",s.label," ")}}let y=(()=>{var e;class n{constructor(){this.selected=[],this.toggled=new t.bkB}onToggle(o){this.toggled.emit(o)}isActive(o){return this.selected.includes(o)}static#t=e=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=t.VBU({type:n,selectors:[["dr-filter-group"]],inputs:{group:"group",selected:"selected"},outputs:{toggled:"toggled"},decls:7,vars:3,consts:[[1,"filter-group"],[4,"ngIf"],[1,"filter-group__options"],["type","button","class","filter-group__option",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"filter-group__option",3,"click","ngClass"],["class","material-symbols-rounded",4,"ngIf"],[1,"material-symbols-rounded"]],template:function(i,r){1&i&&(t.j41(0,"section",0)(1,"header")(2,"h3"),t.EFF(3),t.k0s(),t.DNE(4,v,2,1,"p",1),t.k0s(),t.j41(5,"div",2),t.DNE(6,C,3,5,"button",3),t.k0s()()),2&i&&(t.R7$(3),t.JRh(r.group.title),t.R7$(),t.Y8G("ngIf",r.group.description),t.R7$(2),t.Y8G("ngForOf",r.group.options))},dependencies:[g.Sq,g.YU,g.bT],styles:[".filter-group[_ngcontent-%COMP%]{display:grid;gap:.75rem}.filter-group[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem}.filter-group[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.4rem 0 0;color:#6d7ba1}.filter-group__options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.filter-group__option[_ngcontent-%COMP%]{gap:.5rem;padding:.5rem 1rem;border-radius:999px;border:1px solid rgba(213,220,240,.8);font-weight:500;color:#0a1748;transition:background .18s ease-in-out,color .18s ease-in-out,border-color .18s ease-in-out;display:inline-flex;align-items:center;gap:.4rem;border:1px solid rgba(213,220,240,.9);cursor:pointer;background:#fff}.filter-group__option--active[_ngcontent-%COMP%]{background:#3d7aff1f;color:#3d7aff;border-color:#3d7aff66}.filter-group__option--active[_ngcontent-%COMP%]{background:#3d7aff1f;border-color:#3d7aff66;color:#3d7aff}.filter-group__option[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:1rem}"],changeDetection:0}))}return e(),n})();var P=l(9719);function k(e,n){if(1&e&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&e){const s=n.$implicit;t.R7$(),t.JRh(s)}}let O=(()=>{var e;class n{constructor(){this.tags=[]}static#t=e=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=t.VBU({type:n,selectors:[["dr-tag-list"]],inputs:{tags:"tags"},decls:2,vars:1,consts:[[1,"tag-list"],[4,"ngFor","ngForOf"]],template:function(i,r){1&i&&(t.j41(0,"ul",0),t.DNE(1,k,2,1,"li",1),t.k0s()),2&i&&(t.R7$(),t.Y8G("ngForOf",r.tags))},dependencies:[g.Sq],styles:[".tag-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;padding:0;margin:0;list-style:none}.tag-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:999px;background:#fff;border:1px solid rgba(213,220,240,.8);font-weight:500;color:#0a1748;transition:background .18s ease-in-out,color .18s ease-in-out,border-color .18s ease-in-out;font-size:.85rem}.tag-list[_ngcontent-%COMP%]   li--active[_ngcontent-%COMP%]{background:#3d7aff1f;color:#3d7aff;border-color:#3d7aff66}"],changeDetection:0}))}return e(),n})();var $=l(5429),G=l(4572),M=l(6354),R=l(6458);const T={virtual:e=>e.doctor.virtualCare,multilingual:e=>e.doctor.languages.length>1,evening:e=>e.doctor.availability.some(n=>n.times.some(s=>parseInt(s.split(":")[0],10)>=17)),weekend:e=>e.doctor.availability.some(n=>["Saturday","Sunday"].includes(n.day)),transit:()=>!0,hybrid:()=>!0,inperson:()=>!0,hmo:e=>e.doctor.acceptedPlans.includes("hmo"),ppo:e=>e.doctor.acceptedPlans.includes("ppo"),direct:e=>e.doctor.acceptedPlans.includes("direct")};let x=(()=>{var e;class n{constructor(){this.api=(0,c.WQX)(R.n),this.selections=(0,c.vPA)({}),this.filters$=this.api.getFilters(),this.selectionsSignal=(0,d.EW)(()=>this.selections()),this.selections$=(0,$.br)(this.selectionsSignal),this.activeFilterCount=(0,d.EW)(()=>Object.values(this.selections()).reduce((o,i)=>o+i.length,0)),this.filteredResults$=(0,G.z)([this.api.getSearchResults(),this.selections$,this.filters$]).pipe((0,M.T)(([o,i,r])=>Object.keys(i).length?o.filter(a=>Object.entries(i).every(([u,p])=>!p.length||!r.find(f=>f.id===u)||p.every(f=>{const m=T[f];return!m||m(a)}))):o))}toggleOption(o,i){const r={...this.selections()},a=r[o.id]??[];if("single"===o.type)r[o.id]=a[0]===i?[]:[i];else{const u=a.includes(i)?a.filter(p=>p!==i):[...a,i];r[o.id]=u}this.selections.set(r)}clearGroup(o){if(!this.selections()[o])return;const i={...this.selections()};delete i[o],this.selections.set(i)}resetAll(){this.selections.set({})}static#t=e=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275prov=c.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}))}return e(),n})();function j(e,n){if(1&e&&(t.j41(0,"div",9)(1,"span"),t.EFF(2,"Active filters"),t.k0s(),t.nrm(3,"dr-tag-list",10),t.k0s()),2&e){const s=t.XpG();t.R7$(3),t.Y8G("tags",s.selectedTags())}}function E(e,n){if(1&e){const s=t.RV6();t.j41(0,"button",16),t.bIt("click",function(){c.eBV(s);const i=t.XpG().$implicit,r=t.XpG(2);return c.Njj(r.clearGroup(i.id))}),t.EFF(1),t.k0s()}if(2&e){const s=t.XpG().$implicit;t.R7$(),t.SpI(" Clear ",s.title.toLowerCase()," ")}}function I(e,n){if(1&e){const s=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"dr-filter-group",14),t.bIt("toggled",function(i){const r=c.eBV(s).$implicit,a=t.XpG(2);return c.Njj(a.onToggle(r,i))}),t.k0s(),t.DNE(3,E,2,1,"button",15),t.k0s(),t.bVm()}if(2&e){const s=n.$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("group",s)("selected",o.selectionForGroup(s.id)),t.R7$(),t.Y8G("ngIf",o.selectionForGroup(s.id).length)}}function D(e,n){if(1&e&&(t.j41(0,"div",11),t.DNE(1,I,4,3,"ng-container",12),t.k0s()),2&e){const s=n.ngIf;t.R7$(),t.Y8G("ngForOf",s)}}function N(e,n){if(1&e&&t.nrm(0,"dr-doctor-card",19),2&e){const s=n.$implicit;t.Y8G("doctor",s.doctor)("clinic",s.clinic)("nextAvailable",s.nextAvailable)("highlightDistance",s.distanceInMinutes)}}function A(e,n){if(1&e&&(t.j41(0,"div",17)(1,"h3"),t.EFF(2,"Preview results"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s(),t.DNE(5,N,1,4,"dr-doctor-card",18),t.k0s()),2&e){const s=n.ngIf;t.R7$(4),t.SpI("Showing ",s.length," matches across the pilot network."),t.R7$(),t.Y8G("ngForOf",s)}}let S=(()=>{var e;class n{constructor(){this.facade=(0,c.WQX)(x),this.filters$=this.facade.filters$,this.selections=this.facade.selectionsSignal,this.filteredResults$=this.facade.filteredResults$,this.activeFilters=this.facade.activeFilterCount,this.hasActiveFilters=(0,d.EW)(()=>this.activeFilters()>0),this.selectedTags=(0,d.EW)(()=>Object.values(this.selections()).flatMap(o=>o??[]))}onToggle(o,i){this.facade.toggleOption(o,i)}clearGroup(o){this.facade.clearGroup(o)}resetAll(){this.facade.resetAll()}selectionForGroup(o){return this.selections()[o]??[]}static#t=e=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=t.VBU({type:n,selectors:[["dr-filters-page"]],decls:12,vars:7,consts:[[1,"filters-hero","section"],[1,"container"],["title","Design smart filters","subtitle","Combine access modes, availability and language support to build reusable filter presets for DocRoster.","badge","Configurator"],["actions","",1,"filters-hero__actions"],["type","button",1,"button",3,"click"],["class","filters-hero__selected",4,"ngIf"],[1,"filters-layout","container"],["class","filters-layout__groups",4,"ngIf"],["class","filters-layout__results",4,"ngIf"],[1,"filters-hero__selected"],[3,"tags"],[1,"filters-layout__groups"],[4,"ngFor","ngForOf"],[1,"filters-layout__group"],[3,"toggled","group","selected"],["class","filters-layout__clear","type","button",3,"click",4,"ngIf"],["type","button",1,"filters-layout__clear",3,"click"],[1,"filters-layout__results"],[3,"doctor","clinic","nextAvailable","highlightDistance",4,"ngFor","ngForOf"],[3,"doctor","clinic","nextAvailable","highlightDistance"]],template:function(i,r){1&i&&(t.j41(0,"section",0)(1,"div",1)(2,"dr-section-header",2)(3,"div",3)(4,"button",4),t.bIt("click",function(){return r.resetAll()}),t.EFF(5,"Clear all"),t.k0s()()(),t.DNE(6,j,4,1,"div",5),t.k0s()(),t.j41(7,"section",6),t.DNE(8,D,2,1,"div",7),t.nI1(9,"async"),t.DNE(10,A,6,2,"div",8),t.nI1(11,"async"),t.k0s()),2&i&&(t.R7$(6),t.Y8G("ngIf",r.hasActiveFilters()),t.R7$(2),t.Y8G("ngIf",t.bMT(9,3,r.filters$)),t.R7$(2),t.Y8G("ngIf",t.bMT(11,5,r.filteredResults$)))},dependencies:[g.Sq,g.bT,P.U,y,O,h.t,g.Jj],styles:[".filters-hero[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3d7aff1a,#21b12814)}.filters-hero__actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.filters-hero__selected[_ngcontent-%COMP%]{margin-top:1.5rem;display:grid;gap:.5rem}.filters-hero__selected[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#0a1748}.filters-layout[_ngcontent-%COMP%]{display:grid;gap:2rem;grid-template-columns:repeat(auto-fit,minmax(320px,1fr))}.filters-layout__group[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 20px 40px #0f172a14;display:grid;gap:.75rem}.filters-layout__clear[_ngcontent-%COMP%]{justify-self:flex-start;background:none;border:none;color:#3d7aff;font-weight:600;cursor:pointer}.filters-layout__results[_ngcontent-%COMP%]{display:grid;gap:1.5rem}"],changeDetection:0}))}return e(),n})()}}]);